import React, { Component } from "react";
import axios from 'axios'
import "./App.css";
import moment from "moment";
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import { faEnvelope, faCalendarAlt } from "@fortawesome/free-solid-svg-icons";
import {
  faFacebook,
  faInstagram,
  faAmazon,
  faSpotify
} from "@fortawesome/free-brands-svg-icons";

const photosArray = [
  "12495993_10101285492919294_3806524669896284622_o.jpg",
"13613249_10101285564855134_8334212491284719812_o.jpg",
"14543887_10101285489531084_5353047634090030882_o.jpg",
"14543891_10101285463568114_3019743145271372380_o.jpg",
"14556497_10101285565084674_5633448008400766535_o.jpg",
"14559978_10101285490084974_4022332294283334079_o.jpg",
"14560196_10101285466587064_1691567896525690038_o.jpg",
"14570587_10101285466896444_3662283093965446902_o.jpg",
"14570634_10101285527040914_2870961572869824997_o.jpg",
"14589790_10101285531132714_6128366493642828406_o.jpg",
"14589933_10101285499471164_3525466195807822613_o.jpg",
"14589948_10101285530289404_3012403906909284698_o.jpg",
"14590018_10101285530219544_311014652696404320_o.jpg",
"14612363_10101285486616924_5883036073788597135_o.jpg",
"14612364_10101285461612034_7324075697124048515_o.jpg",
"14612431_10101285505244594_3334147060516144229_o.jpg",
"14612553_10101285500628844_2953301240268733176_o.jpg",
"14615695_10101285530129724_5036473356688639094_o.jpg",
"14615722_10101285502604884_3580058352950062636_o.jpg",
"14615793_10101285528338314_2241032946503359099_o.jpg",
"14615794_10101285531442094_6082961775265124232_o.jpg",
"14633244_10101285564860124_4389268796721420055_o.jpg",
"14633269_10101285532929114_4159772905990995320_o.jpg",
"14633384_10101285461382494_682578781545113373_o.jpg",
"14633395_10101285490748644_3957881643428721649_o.jpg",
"14670892_10101285528582824_8191118798317167238_n.jpg",
"14680802_10101285531397184_7943437766533090240_o.jpg",
"14680828_10101285469710804_3986589060282342737_o.jpg",
"14680838_10101285531417144_7570084758015057429_o.jpg",
"14680846_10101285532220534_1371736713926010480_o.jpg",
"14680856_10101285527544904_7577310372252230524_o.jpg",
"14680940_10101285533617734_6627389730230876128_o.jpg",
"14680961_10101285490573994_7908185813367452278_o.jpg",
"14680983_10101285529211564_1414210791742954053_o.jpg",
"14681905_10101285530773434_2040587879927992754_o.jpg",
"14682033_10101285526756484_5835216384375964820_o.jpg",
"14682051_10101285496996124_7857763469798862310_o.jpg",
"14682056_10101285527894204_4899206424811037682_o.jpg",
"14682081_10101285565254334_4095217170480296467_o.jpg",
"14682094_10101285491127884_1305250476619036042_o.jpg",
"14682154_10101285484710744_236448500370349188_o.jpg",
"14682190_10101285529386214_7623899288520609458_o.jpg",
"14682193_10101285499760584_3704132276567526469_o.jpg",
"14682206_10101285528517954_2295950300031211883_o.jpg",
"14691186_10101285499481144_3659727237691147459_o.jpg",
"14691353_10101285491132874_7272430194646290925_o.jpg",
"14691364_10101285525723554_7754447494003196914_o.jpg",
"14691428_10101285531182614_600930389215400088_o.jpg",
"14691441_10101285532455064_401511168070773847_o.jpg",
"14691454_10101285496866384_7214691520515352104_o.jpg",
"14691895_10101285461826604_6347060195077477603_o.jpg",
"14691899_10101285492485164_3258313565421787842_o.jpg",
"14691926_10101285530004974_2618758400985299576_o.jpg",
"14691941_10101285468702824_8088077268546306290_o.jpg",
"14691943_10101285502589914_5437359714246605190_o.jpg",
"14691954_10101285466287664_3291933762042266885_o.jpg",
"14691992_10101285532689594_6807368877414123239_o.jpg",
"14692057_10101285532799374_4422152975001139488_o.jpg",
"14692180_10101285467869494_6782926756777838184_o.jpg",
"14700751_10101285484516134_1293151843042961891_o.jpg",
"14700801_10101285493388354_5346741203813152246_o.jpg",
"14700803_10101285470494234_274249898107101808_o.jpg",
"14700820_10101285486936284_6790918385500609665_o.jpg",
"14700875_10101285490104934_1103389147521721433_o.jpg",
"14700900_10101285499700704_1635109868713795413_o.jpg",
"14700901_10101285492130874_3390075761631690640_o.jpg",
"14700912_10101285491611914_8507373527826338447_o.jpg",
"14700913_10101285494276574_913467027146675331_o.jpg",
"14700923_10101285498168774_6018332219082683828_o.jpg",
"14700931_10101285525019964_6563521288130146982_o.jpg",
"14700993_10101285505548984_2639097140682618964_o.jpg",
"14701047_10101285463877494_6913381902159844925_o.jpg",
"14706815_10101285470728764_448810178208448506_o.jpg",
"14706878_10101285466856524_2204659382015373994_o.jpg",
"14706882_10101285494506114_628850397169580415_o.jpg",
"14706950_10101285529880224_611762621608309104_o.jpg",
"14706974_10101285493932264_8472379992712738536_o.jpg",
"14706987_10101285495524074_2206703041844101422_o.jpg",
"14706988_10101285565458924_3130906720874799353_o.jpg",
"14707011_10101285526067864_7521701236363956810_o.jpg",
"14707794_10101285486267624_1738490049002334433_o.jpg",
"14707796_10101285528373244_7165750473931360760_o.jpg",
"14707808_10101285564580684_4648305381814511624_o.jpg",
"14707914_10101285493632864_307475043628646208_o.jpg",
"14707938_10101285485708744_5984896629367830368_o.jpg",
"14707962_10101285466277684_7694089927921861376_o.jpg",
"14707985_10101285468513204_1170428936656335368_o.jpg",
"14707993_10101285528977034_5148906761814747227_o.jpg",
"14708008_10101285534226514_6552567783764860247_o.jpg",
"14711028_10101285491497144_4144285550286140086_o.jpg",
"14711101_10101285525833334_491028251769165365_o.jpg",
"14711120_10101285490638864_8120975789212727773_o.jpg",
"14711175_10101285526272454_7914941354463757192_o.jpg",
"14711178_10101285492964204_7682273135728415494_o.jpg",
"14711212_10101285565059724_7799891540842763239_o.jpg",
"14711218_10101285525424154_6247709031665350721_o.jpg",
"14711231_10101285464122004_1201307775999235319_o.jpg",
"14711248_10101285526372254_7142444244007344697_o.jpg",
"14711253_10101285497629854_8054038824122800166_o.jpg",
"14711399_10101285530788404_2194122502437479351_o.jpg",
"14711414_10101285528383224_2287690541673629451_o.jpg",
"14711479_10101285504675734_3387189384504562102_o.jpg",
"14711519_10101285527245504_948511241257540362_o.jpg",
"14711520_10101285466282674_994883106152196503_o.jpg",
"14711554_10101285468827574_80779584158101890_o.jpg",
"14711563_10101285495224674_7254018975633071234_o.jpg",
"14711580_10101285494156814_5667681836369114484_o.jpg",
"14711615_10101285493902324_6830020960189914368_o.jpg",
"14711617_10101285533627714_2157280723940099004_o.jpg",
"14711639_10101285532589794_4985219893553381406_o.jpg",
"14712465_10101285527240514_1728554449035230954_o.jpg",
"14712483_10101285503982124_8127814301302251951_o.jpg",
"14712534_10101285486352454_3639300069470202902_o.jpg",
"14712537_10101285533088794_6363697152479057107_o.jpg",
"14712558_10101285526307384_7377062387482486784_o.jpg",
"14712572_10101285484705754_1920211277631743122_o.jpg",
"14712576_10101285488977194_4163100531441015391_o.jpg",
"14712587_10101285525573854_6071688577251039067_o.jpg",
"14712622_10101285527889214_1295597648534359554_o.jpg",
"14712679_10101285467106024_1295242889832610246_o.jpg",
"14712680_10101285525943114_1440237859595515228_o.jpg",
"14712719_10101285486157844_7761183196208896525_o.jpg",
"14712723_10101285534216534_2116148846001068627_o.jpg",
"14712785_10101285485449264_3705066244767645542_o.jpg",
"14712823_10101285464446354_7804166854413454856_o.jpg",
"14712849_10101285488657834_949554778423065389_o.jpg",
"14712917_10101285469331564_3637223445353755823_o.jpg",
"14712929_10101285501547004_8017962889101559388_o.jpg",
"14712935_10101285489286574_8270697046904778274_o.jpg",
"14712941_10101285500913274_1380623131153754672_o.jpg",
"14712943_10101285527045904_1402313899037282735_o.jpg",
"14712958_10101285532215544_2220549669457508968_o.jpg",
"14712960_10101285489660824_2736555644186019596_o.jpg",
"14714800_10101285491332474_8450816547674528025_o.jpg",
"14714804_10101285485114934_507703784362130234_o.jpg",
"14714863_10101285530124734_4320633684966319730_o.jpg",
"14714880_10101285493937254_5278462185539311050_o.jpg",
"14714936_10101285526876244_4979659307650409083_o.jpg",
"14714952_10101285486262634_6971776268132147983_o.jpg",
"14715022_10101285469935354_437958022164563357_o.jpg",
"14715045_10101285492110914_2284067326075877610_o.jpg",
"14715069_10101285532425124_3376912306705992590_o.jpg",
"14715076_10101285500109884_6073037434100756505_o.jpg",
"14715426_10101285527130734_3169069138181679791_o.jpg",
"14715501_10101285487440274_2138167855677357714_o.jpg",
"14715678_10101285532914144_5129068770311298467_o.jpg",
"14715697_10101285531711554_3464929023535403673_o.jpg",
"14715709_10101285463902444_7685919014190090513_o.jpg",
"14753195_10101285486073014_1190528908716762739_o.jpg",
"14753199_10101285489047054_5403594122877654167_o.jpg",
"14753211_10101285496172774_3605566592140031506_o.jpg",
"14753225_10101285503543004_8162350127830382949_o.jpg",
"14753259_10101285502894304_7903922922176967781_o.jpg",
"14753272_10101285525803394_8150796462729234302_o.jpg",
"14753277_10101285533727514_33926792740477019_o.jpg",
"14753284_10101285529510964_4896334270555721660_o.jpg",
"14753355_10101285503413264_976872361750689672_o.jpg",
"14753403_10101285492754624_6663331513189046004_o.jpg",
"14753412_10101285528992004_5600142438428376607_o.jpg",
"14753471_10101285466961314_212966595694127635_o.jpg",
"14753497_10101285530369244_8620983662764009844_o.jpg",
"14753759_10101285498528054_8581444002073233259_o.jpg",
"14753782_10101285531956064_261030520673160980_o.jpg",
"14753888_10101285494965194_603191621231481928_o.jpg",
"14753893_10101285494715694_7238595621534600511_o.jpg",
"14753926_10101285494281564_7659485632509048783_o.jpg",
"14753943_10101285527524944_9007212619410184556_o.jpg",
"14753945_10101285532669634_3689619970237835431_o.jpg"
];

// const fadein = keyframes`
// 0% { opacity: 0; }
// 100% { opacity: 1; }
// `;

// const animation = css`
//   ${fadein} 2s;
// `;

// const PictureFrame = styled.div`
//   display: flex;
//   justify-content: center;
//   background-repeat: no-repeat;
//   height: 100vh;
//   width: 100%;
//   background-position: center;
//   background-image: ${props => props.selectedPhoto.backgroundImage};
// `;

const verbs = [
  "loves",
  "thinks about",
  "desires",
  "needs",
  "wants",
  "is amazed by",
  "is amused by",
  "is proud of",
  'enjoys kissing',
  'is enamoured with',
  'is bowled over by',

];

const loveAdjectives = [
  "an incredible",
  "a stupendous",
  "a phenomenal",
  "a mind-boggling",
  "a neverending",
  "an immeasurable",
  "a crazy",
  "a flabbergasting",
  "a silly",
  "a shocking"
];

const GreetingsFrame = ({ selectedAdjective, selectedVerb, timeOfDay, temperature, feelsLike, chanceOfRain }) => {
  return (
    <div className="greetingsFrame">
      <h1>{`Good ${timeOfDay} Petia!`}</h1>
      <h2>
        It's {moment().format("h:mm a")}
        <br />
        {moment().format("dddd Do MMMM")}{" "}
      </h2>
      <h2>
        Temperature: {temperature}&deg;C ({feelsLike}&deg;C)
        <br />
        Chance of rain: {chanceOfRain}%
      </h2>
      <h2>
        {selectedVerb &&
          `Richard ${selectedVerb} you ${selectedAdjective} amount`}
      </h2>
      <div className="icons">
        <a href="https://gmail.com">
          <FontAwesomeIcon
            icon={faEnvelope}
            size="3x"
            color="white"
            style={{ paddingRight: "2rem" }}
          />
        </a>
        <a href="https://calendar.google.com">
          <FontAwesomeIcon
            icon={faCalendarAlt}
            size="3x"
            color="white"
            style={{ paddingRight: "2rem" }}
          />
        </a>
        <a href="https://facebook.com">
          <FontAwesomeIcon
            icon={faFacebook}
            size="3x"
            color="white"
            style={{ paddingRight: "2rem" }}
          />
        </a>
        <a href="https://open.spotify.com">
          <FontAwesomeIcon
            icon={faSpotify}
            size="3x"
            color="white"
            style={{ paddingRight: "2rem" }}
          />
        </a>
        <a href="https://instagram.com">
          <FontAwesomeIcon
            icon={faInstagram}
            size="3x"
            color="white"
            style={{ paddingRight: "1.6rem" }}
          />
        </a>
        <a href="https://amazon.co.uk">
          <FontAwesomeIcon icon={faAmazon} size="3x" color="white" />
        </a>
      </div>
    </div>
  );
};

class App extends Component {
  state = {
    selectedPhoto: "",
    showGreeting: true
  };

  componentDidMount = async () => {
    // const {data: {Locations: {Location: forecast}}} = await axios.get(`http://datapoint.metoffice.gov.uk/public/data/val/wxfcs/all/json/sitelist?key=1fa41a68-8964-48cc-b5cf-d6a6e7089375`)
    // console.log('forecast: ', forecast.filter(forecast => forecast.name.toLowerCase() === 'london'))
    const {data: {SiteRep: {DV: {Location: {Period}}}}} = await axios.get(`http://datapoint.metoffice.gov.uk/public/data/val/wxfcs/all/json/352409?res=3hourly&key=1fa41a68-8964-48cc-b5cf-d6a6e7089375`)

    this.setState({temperature: Period[0].Rep[0].T, chanceOfRain: Period[0].Rep[0].Pp, feelsLike: Period[0].Rep[0].F})
    
    const time = moment().format("HH");
    if (time >= 12 && time < 18) this.setState({ timeOfDay: "afternoon" });
    if (time >= 4 && time < 12) this.setState({ timeOfDay: "morning" });
    if (time >= 18 || time < 4) this.setState({ timeOfDay: "evening" });
    this.selectFirstRandomPhoto();
    this.selectSecondRandomPhoto()
    this.selectVerb();
    this.selectAdjective();
    setTimeout(() => setInterval(() => this.selectSecondRandomPhoto(), 12000), 6000)
    setInterval(() => {this.selectFirstRandomPhoto()
      this.selectAdjective()
      this.selectVerb()
    }, 12000);
  };

  selectVerb = () => {
    const randomIndex = Math.floor(Math.random() * verbs.length);
    const selectedVerb = verbs[randomIndex];
    this.setState({ selectedVerb });
  };

  selectAdjective = () => {
    const randomIndex = Math.floor(Math.random() * loveAdjectives.length);
    const selectedAdjective = loveAdjectives[randomIndex];
    this.setState({ selectedAdjective });
  };

  selectFirstRandomPhoto = () => {
    const randomIndex = Math.floor(Math.random() * photosArray.length);
    const firstSelectedPhoto = require(`./images/pets-photos/${
      photosArray[randomIndex]
    }`);
    this.setState({ firstSelectedPhoto });
  };

  selectSecondRandomPhoto = () => {
    const randomIndex = Math.floor(Math.random() * photosArray.length);
    const secondSelectedPhoto = require(`./images/pets-photos/${
      photosArray[randomIndex]
    }`);
    this.setState({ secondSelectedPhoto });
  };

  render() {
    return (
      <React.Fragment>
        <div className="pictureFrame"
          style={{
            backgroundImage: `url(${this.state.firstSelectedPhoto})`
          }}
        />
          <div className="top"
          style={{
            backgroundImage: `url(${this.state.secondSelectedPhoto})`
          }}
        />
        <div
          onClick={() =>
            this.setState({ showGreeting: !this.state.showGreeting })
          }
          style={{
            position: "fixed",
            top: "0",
            left: "0",
            height: "100vh",
            width: "100vw"
          }}
        >
          {this.state.showGreeting && (
            <GreetingsFrame
              selectedAdjective={this.state.selectedAdjective}
              selectedVerb={this.state.selectedVerb}
              timeOfDay={this.state.timeOfDay}
              temperature={this.state.temperature}
              feelsLike={this.state.feelsLike}
              chanceOfRain={this.state.chanceOfRain}
            />
          )}
        </div>
      </React.Fragment>
    );
  }
}

export default App;
